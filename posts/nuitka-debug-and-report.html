<!doctype html><html class=""><head>
<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="description" content="Coding For Living."/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" property="og:title" content="Nuitka 调试与追踪 · Rainzee&#x27;s Blog"/><meta data-react-helmet="true" property="og:description" content="Coding For Living."/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@RainzeeWang"/>
<title data-react-helmet="true">Nuitka 调试与追踪 · Rainzee&#x27;s Blog</title>
<link data-react-helmet="true" rel="stylesheet" href="/assets/index.css"/><link data-react-helmet="true" id="prismTheme" rel="stylesheet" href="/assets/prism.css"/>
<script data-react-helmet="true" >
    const shouldSetIsDark = document.cookie.includes('is_dark=1') ? true : document.cookie.includes('is_dark=0') ? false : window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (shouldSetIsDark) {
      document.documentElement.classList.add('is_dark');
      document.getElementById('prismTheme').href = "/assets/prism_tomorrow.css";
    }
  </script>
</head><body><a class="czs-menu-l show_on_mobile aside_button_open" href="#" style="background-image:url(&quot;/assets/czs-menu-l.svg&quot;)"></a><a class="show_on_mobile aside_button_text" href="/">Rainzee&#x27;s Blog</a><aside class="hide_on_mobile"><div class="aside_card"><a class="czs-menu-l show_on_mobile aside_button_close" href="#" style="background-image:url(&quot;/assets/czs-close-l.svg&quot;)"></a><h1><a href="/">Rainzee&#x27;s Blog</a></h1><p class="description">Coding For Living.</p><ul class="social list_style_none"><li class="flex_center"><a class="czs-github-logo" href="https://github.com/rainzee" target="_blank" style="background-image:url(&quot;/assets/czs-github-logo.svg&quot;)"></a></li><li class="flex_center"><a class="czs-message-l" href="mailto:rainzee.w@gmail.com" target="_blank" style="background-image:url(&quot;/assets/czs-message-l.svg&quot;)"></a></li><li class="flex_center"><a class="czs-twitter" href="https://twitter.com/RainzeeWang" target="_blank" style="background-image:url(&quot;/assets/czs-twitter.svg&quot;)"></a></li><li style="flex-grow:1"></li><li class="toggle_dark flex_center"><span class="czs-sun" style="background-image:url(&quot;/assets/czs-sun.svg&quot;)"></span><span class="czs-sun-l" style="background-image:url(&quot;/assets/czs-sun-l.svg&quot;)"></span><span class="czs-moon" style="background-image:url(&quot;/assets/czs-moon.svg&quot;)"></span><span class="czs-moon-l" style="background-image:url(&quot;/assets/czs-moon-l.svg&quot;)"></span></li></ul><nav><ul class="menu list_style_none"><li><a class="flex_center" href="/"><span class="czs-home-l" style="background-image:url(&quot;/assets/czs-home-l.svg&quot;)"></span>文章</a></li><li><a class="flex_center" href="/tags/"><span class="czs-tag-l" style="background-image:url(&quot;/assets/czs-tag-l.svg&quot;)"></span>标签</a></li><li><a class="flex_center" href="/archives/"><span class="czs-box-l" style="background-image:url(&quot;/assets/czs-box-l.svg&quot;)"></span>归档</a></li><li><a class="flex_center" href="/about/"><span class="czs-about-l" style="background-image:url(&quot;/assets/czs-about-l.svg&quot;)"></span>关于</a></li></ul></nav></div><nav class="toc"><ol><li><a href="#%E5%BC%BA%E5%A4%A7%E7%9A%84%E8%B0%83%E8%AF%95%E4%B8%8E%E8%BF%BD%E8%B8%AA%E6%8E%A7%E5%88%B6">强大的调试与追踪控制</a></li><li><a href="#%E8%B0%83%E8%AF%95">调试</a></li><li><a href="#%E6%8A%A5%E5%91%8A%E4%B8%8E%E8%BF%BD%E8%B8%AA">报告与追踪</a></li><li><a href="#reference">Reference</a></li></ol></nav></aside><section class="main"><h1>Nuitka 调试与追踪</h1><div class="main_post_meta"><time dateTime="Fri Sep 08 2023 00:00:00 GMT+0000 (Coordinated Universal Time)">2023-09-08</time> · rainzee</div><article><h2 id="%E5%BC%BA%E5%A4%A7%E7%9A%84%E8%B0%83%E8%AF%95%E4%B8%8E%E8%BF%BD%E8%B8%AA%E6%8E%A7%E5%88%B6">强大的调试与追踪控制<a class="anchor" href="#%E5%BC%BA%E5%A4%A7%E7%9A%84%E8%B0%83%E8%AF%95%E4%B8%8E%E8%BF%BD%E8%B8%AA%E6%8E%A7%E5%88%B6">§</a></h2>
<p>其实在 Nuitka 中，自带了许多强大的调试和追踪报告功能，能够允许你对程序运行的诸多细节进行追踪和调试，这对于部署真正的生产级别的代码是至关重要地。但是在中文互联网甚至是英文我鲜少有看到实际介绍这部分的文章，这未免有些浪费，下面我将介绍如何使用 Nuitka 内置的调试与追踪功能来生成详细的报告。</p>
<h2 id="%E8%B0%83%E8%AF%95">调试<a class="anchor" href="#%E8%B0%83%E8%AF%95">§</a></h2>
<ul>
<li>
<p><code>--debug</code>  执行尽可能多的自检以查找Nuitka中的错误。不要用于生产。默认关闭。</p>
</li>
<li>
<p><code>--unstripped</code>  在生成的对象文件中保留调试信息，以实现更好的调试器交互。默认关闭。</p>
</li>
<li>
<p><code>--profile</code>  启用基于vmprof的时间分析。目前不工作。默认关闭。</p>
</li>
<li>
<p><code>--internal-graph</code>  创建优化过程内部的图形，不要用于整个程序，仅用于小型测试案例。默认关闭。</p>
</li>
<li>
<p><code>--trace-execution</code>  追踪执行输出，在执行代码之前输出代码行。默认关闭。</p>
</li>
<li>
<p><code>--recompile-c-only</code>  这不是增量编译，而仅用于 Nuitka 开发。它采用现有文件，仅将其重新编译为 C。允许编译已编辑的 C 文件，以快速调试生成的源代码更改，例如查看代码是否被通过，输出值等。默认关闭。取决于编译 Python 源代码来确定应查看哪些文件。</p>
</li>
<li>
<p><code>--xml=XML_FILENAME</code>  将优化过程的内部程序结构以 XML 形式写入给定的文件名。</p>
</li>
<li>
<p><code>--generate-c-only</code>  仅生成 C 源代码，不编译为二进制或模块。这用于不浪费 CPU 的调试和代码覆盖分析。默认关闭。不要认为你可以直接使用它。</p>
</li>
<li>
<p><code>--experimental=FLAG</code>  使用声明为 <code>“experimental”</code> 的功能。如果代码中没有实验性功能，则可能不起作用。使用实验性标签（检查源代码）进行每个实验的功能。</p>
</li>
<li>
<p><code>--low-memory</code>  尝试使用更少的内存，通过减少 C 编译作业的分支和使用使用更少内存的选项。用于嵌入式设备。如果遇到内存不足问题，请使用此选项。默认关闭。但是根据我的经验来看，大部分告警内存不足基本都是由于你的编译姿势不对所导致的，请优先排除其他错误，最后考虑此选项。</p>
</li>
<li>
<p><code>--create-environment-from-report=CREATE_ENVIRONMENT_FROM_REPORT</code>  从给定的报告文件创建新的虚拟环境，例如 <code>'--report=compilation-report.xml'</code> 。默认不执行。</p>
</li>
</ul>
<h2 id="%E6%8A%A5%E5%91%8A%E4%B8%8E%E8%BF%BD%E8%B8%AA">报告与追踪<a class="anchor" href="#%E6%8A%A5%E5%91%8A%E4%B8%8E%E8%BF%BD%E8%B8%AA">§</a></h2>
<ul>
<li>
<p><code>--report=REPORT_FILENAME</code>  以 XML 输出文件的形式报告模块、数据文件、编译、插件等详细信息。这对于问题报告也非常有用。这些报告可以用于通过 <code>'--create-environment-from-report'</code> 轻松重新创建环境，但包含大量信息。默认关闭。</p>
</li>
<li>
<p><code>--report-diffable</code>  以可比较的形式报告数据，即没有时间或内存使用值的变化。默认关闭。</p>
</li>
<li>
<p><code>--report-user-provided=KEY_VALUE</code>  报告来自您的数据。可以多次提供，格式为 <code>'key=value'</code>，其中 <code>key</code> 应为标识符，例如，使用 <code>'--report-user-provided=pipenv-lock-hash=64a5e4'</code> 来跟踪某些输入值。默认为空。</p>
</li>
<li>
<p><code>--report-template=REPORT_DESC</code>  通过模板进行报告。提供模板和输出文件名 <code>&quot;template.rst.j2:output.rst&quot;</code>。对于内置模板，请查看用户手册以了解这些模板是什么。可以多次提供。默认为空。</p>
</li>
<li>
<p><code>--quiet</code>  禁用所有信息输出，但显示警告。默认关闭。</p>
</li>
<li>
<p><code>--show-scons</code>  以详细信息运行 C 构建后端 Scons，显示执行的命令和检测到的编译器。默认关闭。</p>
</li>
<li>
<p><code>--no-progressbar</code>  禁用进度条。默认关闭。</p>
</li>
<li>
<p><code>--show-progress</code>  提供进度信息和统计信息。禁用正常的进度条。默认关闭。现在已经停止支持。</p>
</li>
<li>
<p><code>--show-memory</code>  提供内存信息和统计信息。默认关闭。</p>
</li>
<li>
<p><code>--show-modules</code>  提供包含的模块和 DLL 的信息。已过时，你应该使用 <code>'--report'</code> 文件代替。默认关闭。</p>
</li>
<li>
<p><code>--show-modules-output=PATH</code>  指定 <code>'--show-modules'</code> 的输出位置，应为文件名。默认为标准输出。</p>
</li>
<li>
<p><code>--verbose</code>  输出所采取的行动的详细信息，特别是在优化中。可能会变得非常多。默认关闭。</p>
</li>
<li>
<p><code>--verbose-output=PATH</code>  指定 <code>'--verbose'</code>。</p>
</li>
</ul>
<h2 id="reference">Reference<a class="anchor" href="#reference">§</a></h2>
<p><a href="https://nuitka.net/">Nuitka the Python Compiler — Nuitka the Python Compiler documentation</a></p></article></section><footer></footer><script src="https://cdn.pagic.org/react@18.2.0/umd/react.production.min.js"></script><script src="https://cdn.pagic.org/react-dom@18.2.0/umd/react-dom.production.min.js"></script><script type="module" src="/index.js"></script></body></html>